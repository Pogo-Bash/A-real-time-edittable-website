<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Real-time code editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/codemirror.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.0/socket.io.min.js"></script>
  </head>
  <body>
    <textarea id="code"></textarea>
    <script>
      var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        lineNumbers: true,
        mode: "javascript"
      });

      var socket = io();
      socket.on("connect", function() {
        console.log("Connected to server");
      });
      socket.on("disconnect", function() {
        console.log("Disconnected from server");
      });
      socket.on("code", function(code) {
        editor.setValue(code);
      });

      editor.on("change", function() {
        var code = editor.getValue();
        socket.emit("code", code);
      });
    </script>
  </body>
</html>
